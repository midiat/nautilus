(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{xbUr:function(o,e,i){"use strict";i.r(e),i.d(e,"MedicosPageModule",(function(){return C}));var t=i("ofXK"),n=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),c=i("mrSG"),a=i("AytR"),l=i("fXoL"),d=i("cx2M"),b=i("IrbQ");let m=(()=>{class o{constructor(o,e,i,t,n,s,r){this.formBuilder=o,this.alertController=e,this.modalController=i,this.toastController=t,this.actionSheetController=n,this.medicoService=s,this.hardwarecontrollerService=r,this.baseUrl=a.a.baseUrl,this.noImage="noImage.svg"}ngOnInit(){this.doctorData=this.formBuilder.group({nombre:[this.medico.nombre,[n.j.required,n.j.minLength(3)]]})}cerrarModal(){return Object(c.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({backdropDismiss:!1,header:"\xa1Hey!",message:"No se han guardado los cambios. \xbfQuieres continuar?.",buttons:[{text:"S\xed",cssClass:"confirm",handler:()=>{this.modalController.dismiss({dismissed:!0})}},{text:"No",cssClass:"cancel"}]});yield o.present()}))}changeProperties(){return Object(c.a)(this,void 0,void 0,(function*(){console.log("Cambiando las propiedades");const o=yield this.actionSheetController.create({header:"Escoge una acci\xf3n:",buttons:[{text:"Cambiar imagen desde c\xe1mara",icon:"camera-outline",handler:()=>{console.log("Camara en funci\xf3n"),this.hardwarecontrollerService.openCamera()}},{text:"Cambiar imagen desde galer\xeda",icon:"image-outline",handler:()=>{console.log("Galer\xeda abierta"),this.hardwarecontrollerService.openGalery()}},{text:"Cancelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancelado")}}]});yield o.present()}))}actualizarDatos(){console.log(">>! Funciona actualizar m\xe9dico."),this.medicoService.actualizaMedico(this.doctorData.value,this.medico._id).then(o=>Object(c.a)(this,void 0,void 0,(function*(){console.log(o),(yield this.toastController.create({header:o.header,position:"bottom"})).present(),setTimeout(()=>{this.toastController.dismiss()},5e3),this.modalController.dismiss({itemReturned:o.data})})))}}return o.\u0275fac=function(e){return new(e||o)(l.Ib(n.a),l.Ib(s.b),l.Ib(s.U),l.Ib(s.cb),l.Ib(s.a),l.Ib(d.a),l.Ib(b.a))},o.\u0275cmp=l.Cb({type:o,selectors:[["app-editar-medico"]],inputs:{medico:"medico"},decls:33,vars:5,consts:[["slot","end"],["color","danger",3,"click"],["slot","icon-only","name","close-outline","color","dark"],[1,"ion-padding"],[1,"ion-padding","ion-text-center"],["fixed",""],["size","4",1,"ion-align-self-center"],[1,"avatarBtn",3,"src","click"],["size","8",1,"ion-align-self-center","ion-text-start","ion-padding-start"],[1,"ion-no-margin"],[2,"font-size","14px"],[2,"font-weight","300","color","var(--ion-color-medium-tint)"],[2,"font-weight","400","color","var(--ion-color-primary)"],[1,"ion-padding","ion-margin-top"],[3,"formGroup"],["slot","start","name","person-circle-outline","color","secondary"],["position","stacked","color","primary",2,"opacity","0.6"],["type","text","formControlName","nombre"],[1,"ion-text-center"],["color","tertiary","fill","outline","shape","round",1,"ion-padding",3,"click"],["slot","start","name","save-outline"]],template:function(o,e){1&o&&(l.Lb(0,"ion-header"),l.Lb(1,"ion-toolbar"),l.Lb(2,"ion-title"),l.fc(3,"Modifica a un m\xe9dico"),l.Kb(),l.Lb(4,"ion-buttons",0),l.Lb(5,"ion-button",1),l.Tb("click",(function(){return e.cerrarModal()})),l.Jb(6,"ion-icon",2),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(7,"ion-content",3),l.Lb(8,"div",4),l.Lb(9,"ion-grid",5),l.Lb(10,"ion-row"),l.Lb(11,"ion-col",6),l.Lb(12,"img",7),l.Tb("click",(function(){return e.changeProperties()})),l.Kb(),l.Kb(),l.Lb(13,"ion-col",8),l.Lb(14,"h1",9),l.fc(15),l.Kb(),l.Lb(16,"ion-text",10),l.Lb(17,"span",11),l.fc(18,"C\xe9dula Profesional:"),l.Kb(),l.Jb(19,"br"),l.Lb(20,"span",12),l.fc(21),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(22,"div",13),l.Lb(23,"form",14),l.Lb(24,"ion-item"),l.Jb(25,"ion-icon",15),l.Lb(26,"ion-label",16),l.fc(27,"Nombre:"),l.Kb(),l.Jb(28,"ion-input",17),l.Kb(),l.Kb(),l.Kb(),l.Lb(29,"div",18),l.Lb(30,"ion-button",19),l.Tb("click",(function(){return e.actualizarDatos()})),l.Jb(31,"ion-icon",20),l.fc(32," Guardar "),l.Kb(),l.Kb(),l.Kb()),2&o&&(l.xb(12),l.Zb("src","",e.baseUrl,"/upload/medicos/",e.medico.img||e.noImage,"",l.cc),l.xb(3),l.gc(e.medico.nombre),l.xb(6),l.gc(e.medico.cedulaProf),l.xb(2),l.Yb("formGroup",e.doctorData))},directives:[s.s,s.Q,s.P,s.j,s.i,s.t,s.q,s.r,s.K,s.p,s.O,n.k,n.h,n.c,s.y,s.C,s.x,s.bb,n.g,n.b],styles:[".avatarBtn[_ngcontent-%COMP%]{border-radius:100%;max-width:100%;box-shadow:0 0 10px 2px rgba(0,0,0,.2)}"]}),o})(),h=(()=>{class o{constructor(o,e,i,t,s){this.formBuilder=o,this.alertController=e,this.modalController=i,this.toastController=t,this.medicoService=s,this.doctorRegister=this.formBuilder.group({nombre:["",[n.j.required,n.j.minLength(3)]],cedulaProf:["",[n.j.required,n.j.minLength(9)]]})}ngOnInit(){}cerrarModal(){return Object(c.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({backdropDismiss:!1,header:"\xa1Hey!",message:"No se han guardado los cambios. \xbfQuieres continuar?.",buttons:[{text:"S\xed",cssClass:"confirm",handler:()=>{this.modalController.dismiss({dismissed:!0})}},{text:"No",cssClass:"cancel"}]});yield o.present()}))}crearMedico(){console.log(">>! Funciona crear m\xe9dico..."),console.log(this.doctorRegister.value),this.medicoService.crearMedico(this.doctorRegister.value).then(o=>Object(c.a)(this,void 0,void 0,(function*(){if(console.log(o),o._id)this.modalController.dismiss({itemReturned:!0}),(yield this.toastController.create({header:"\xa1M\xe9dico registrado exitosamente",position:"bottom"})).present(),setTimeout(()=>{this.toastController.dismiss()},5e3);else{const e=yield this.alertController.create({backdropDismiss:!1,header:o.error.header,message:o.error.msg,buttons:["ok"]});yield e.present()}})))}}return o.\u0275fac=function(e){return new(e||o)(l.Ib(n.a),l.Ib(s.b),l.Ib(s.U),l.Ib(s.cb),l.Ib(d.a))},o.\u0275cmp=l.Cb({type:o,selectors:[["app-crear-medico"]],outputs:{doctorData:"doctorData"},decls:26,vars:1,consts:[["slot","end"],["color","danger",3,"click"],["slot","icon-only","name","close-outline","color","dark"],[1,"ion-padding"],[1,"ion-padding","ion-margin-top"],[3,"formGroup"],["slot","start","name","person-circle-outline","color","secondary"],["position","stacked","color","primary",2,"opacity","0.6"],["type","text","formControlName","nombre"],["type","number","formControlName","cedulaProf"],[1,"ion-text-center"],["color","tertiary","fill","outline","shape","round",1,"ion-padding",3,"click"],["slot","start","name","add-outline"]],template:function(o,e){1&o&&(l.Lb(0,"ion-header"),l.Lb(1,"ion-toolbar"),l.Lb(2,"ion-title"),l.fc(3,"Registra a un nuevo m\xe9dico"),l.Kb(),l.Lb(4,"ion-buttons",0),l.Lb(5,"ion-button",1),l.Tb("click",(function(){return e.cerrarModal()})),l.Jb(6,"ion-icon",2),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(7,"ion-content",3),l.Lb(8,"h1"),l.fc(9,"Escribe sus datos aqui:"),l.Kb(),l.Lb(10,"div",4),l.Lb(11,"form",5),l.Lb(12,"ion-item"),l.Jb(13,"ion-icon",6),l.Lb(14,"ion-label",7),l.fc(15,"Nombre:"),l.Kb(),l.Jb(16,"ion-input",8),l.Kb(),l.Lb(17,"ion-item"),l.Jb(18,"ion-icon",6),l.Lb(19,"ion-label",7),l.fc(20,"C\xe9dula Profesional:"),l.Kb(),l.Jb(21,"ion-input",9),l.Kb(),l.Kb(),l.Kb(),l.Lb(22,"div",10),l.Lb(23,"ion-button",11),l.Tb("click",(function(){return e.crearMedico()})),l.Jb(24,"ion-icon",12),l.fc(25," Registrar M\xe9dico "),l.Kb(),l.Kb(),l.Kb()),2&o&&(l.xb(11),l.Yb("formGroup",e.doctorRegister))},directives:[s.s,s.Q,s.P,s.j,s.i,s.t,s.q,n.k,n.h,n.c,s.y,s.C,s.x,s.bb,n.g,n.b,s.W],styles:[""]}),o})();var u=i("SKeb");function g(o,e){if(1&o){const o=l.Mb();l.Lb(0,"ion-refresher",15),l.Tb("ionRefresh",(function(e){return l.bc(o),l.Vb().actualizarLista_Medicos(e)})),l.Jb(1,"ion-refresher-content"),l.Kb()}}function p(o,e){if(1&o&&(l.Lb(0,"div",16),l.Lb(1,"ion-card"),l.Lb(2,"ion-card-content",17),l.Jb(3,"ion-spinner",18),l.Lb(4,"p",19),l.fc(5),l.Kb(),l.Kb(),l.Kb(),l.Kb()),2&o){const o=l.Vb();l.xb(5),l.gc(o.loaderText_Card)}}function f(o,e){if(1&o){const o=l.Mb();l.Lb(0,"ion-list"),l.Lb(1,"ion-item-sliding"),l.Lb(2,"ion-item-options",20),l.Lb(3,"ion-item-option",21),l.Tb("click",(function(){l.bc(o);const i=e.$implicit;return l.Vb().editarMedico(i)})),l.Jb(4,"ion-icon",22),l.Kb(),l.Kb(),l.Lb(5,"ion-item"),l.Lb(6,"ion-avatar",0),l.Jb(7,"img",23),l.Kb(),l.Lb(8,"ion-label"),l.Lb(9,"h2",24),l.fc(10),l.Kb(),l.Lb(11,"h3"),l.Lb(12,"span",25),l.fc(13,"C\xe9dula Prof: "),l.Kb(),l.Lb(14,"span",26),l.fc(15),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(16,"ion-item-options",27),l.Lb(17,"ion-item-option",28),l.Tb("click",(function(){l.bc(o);const i=e.$implicit;return l.Vb().eliminarMedico(i)})),l.Jb(18,"ion-icon",29),l.Kb(),l.Kb(),l.Kb(),l.Kb()}if(2&o){const o=e.$implicit,i=l.Vb();l.xb(7),l.Zb("src","",i.baseUrl,"/upload/medicos/",o.img||i.noImage,"",l.cc),l.xb(3),l.gc(o.nombre),l.xb(5),l.gc(o.cedulaProf)}}function L(o,e){if(1&o&&(l.Lb(0,"div",19),l.Lb(1,"p",30),l.fc(2),l.Kb(),l.Kb()),2&o){const o=l.Vb();l.xb(2),l.gc(o.listenerText)}}const v=[{path:"",component:(()=>{class o{constructor(o,e,i,t){this.alertController=o,this.modalController=e,this.medicoService=i,this.busquedasService=t,this.baseUrl=a.a.baseUrl,this.noImage="noImage.svg",this.medicos=[],this.totalRegistrados=0,this.updateList=!0,this.loading=!0,this.loaderText_Card="",this.completeListener=!1,this.listenerText="",this.desde=0}ngOnInit(){this.obtenerMedicos()}crearMedico(){return Object(c.a)(this,void 0,void 0,(function*(){console.log(">>! Funciona crear m\xe9dico...");const o=yield this.modalController.create({component:h,cssClass:"my-custom-class"});yield o.present(),this.ionList.closeSlidingItems();const{data:e}=yield o.onDidDismiss();console.log(e),!0===e.itemReturned&&(this.desde=0,this.medicos=[],this.completeListener=!1,this.infiniteScroll.disabled=!1,this.obtenerMedicos())}))}obtenerMedicos(){return Object(c.a)(this,void 0,void 0,(function*(){this.loading=!0,this.loaderText_Card="Cargando lista de m\xe9dicos",yield this.medicoService.obtenerMedicos(0).then(o=>{this.medicos=o.doctores,console.log("M\xe9dicos capturados:",this.medicos),this.totalRegistrados=o.total,this.updateList=!0,this.loading=!1})}))}actualizarLista_Medicos(o){return Object(c.a)(this,void 0,void 0,(function*(){this.medicos=[],this.completeListener=!0,this.listenerText="Actualizando lista de usuarios registrados...",this.desde=0,this.infiniteScroll.disabled=!1,yield this.medicoService.obtenerMedicos(0).then(e=>{this.medicos=e.doctores,console.log("M\xe9dicos actualizados capturados:",this.medicos),this.totalRegistrados=e.total,this.updateList=!0,o.target.complete(),this.loading=!1})}))}reloadDoctors(o){return Object(c.a)(this,void 0,void 0,(function*(){this.desde+=o,console.log(this.desde),this.desde>=this.totalRegistrados&&(this.desde-=o-10,this.infiniteScroll.disabled=!0,this.completeListener=!0,this.listenerText="Se han mostrado todos los resultados."),yield this.medicoService.obtenerMedicos(this.desde).then(o=>{console.log(o),this.medicos.push(...o.doctores),this.infiniteScroll.complete()})}))}editarMedico(o){return Object(c.a)(this,void 0,void 0,(function*(){console.log("Datos del m\xe9dico seleccionado:",o);const e=yield this.modalController.create({component:m,componentProps:{medico:o},cssClass:"my-custom-class"});yield e.present(),this.ionList.closeSlidingItems();const{data:i}=yield e.onDidDismiss();if(console.log(i),i){const e=i.itemReturned;this.medicos.find(i=>{if(i._id===o._id)return i.nombre=e.nombre,!0})||this.medicos.push(e)}}))}eliminarMedico(o){return Object(c.a)(this,void 0,void 0,(function*(){console.log("Datos del m\xe9dico seleccionado:",o);const e=o._id,i=yield this.alertController.create({backdropDismiss:!1,header:"\xbfSeguro?",message:`Estas por eliminar a ${o.nombre}, si deseas ejecutar la acci\xf3n, presiona Eliminar.`,buttons:[{text:"Eliminar",cssClass:"delete",handler:()=>Object(c.a)(this,void 0,void 0,(function*(){yield this.medicoService.eliminaM\u00e9dico(e).then(e=>Object(c.a)(this,void 0,void 0,(function*(){if(console.log("Datos recibidos de la petici\xf3n:",e),e.header){const i=yield this.alertController.create({backdropDismiss:!1,header:"Realizado",message:e.header});yield i.present(),setTimeout(()=>{this.alertController.dismiss()},2e3);const t=this.medicos.findIndex(e=>e._id===o._id);this.medicos.splice(t,1),this.ionList.closeSlidingItems()}})))}))},{text:"Cancelar",cssClass:"cancel",handler:()=>{console.log("Operaci\xf3n cancelada"),this.ionList.closeSlidingItems()}}]});yield i.present()}))}busqueda(o){return Object(c.a)(this,void 0,void 0,(function*(){this.medicos=[],this.loading=!0,this.loaderText_Card="Buscando usuarios...",this.completeListener=!1,this.infiniteScroll.disabled=!1,""===o.detail.value&&(this.obtenerMedicos(),this.desde=0,this.completeListener=!1),yield this.busquedasService.busqueda_Coleccion(o.detail.value,"doctores").then(o=>{0===o.length?(this.loading=!1,this.completeListener=!0,this.listenerText="No hay resultados con el criterio de b\xfasqueda solicitado."):o.length>0&&(this.loading=!1,this.medicos=o)})}))}}return o.\u0275fac=function(e){return new(e||o)(l.Ib(s.b),l.Ib(s.U),l.Ib(d.a),l.Ib(u.a))},o.\u0275cmp=l.Cb({type:o,selectors:[["app-medicos"]],viewQuery:function(o,e){var i;1&o&&(l.hc(s.v,!0),l.hc(s.D,!0)),2&o&&(l.ac(i=l.Ub())&&(e.infiniteScroll=i.first),l.ac(i=l.Ub())&&(e.ionList=i.first))},decls:22,vars:5,consts:[["slot","start"],["defaultHref","/dashboard"],["slot","end"],["color","primary",3,"click"],["slot","icon-only","name","add"],[1,"ion-padding"],["slot","fixed",3,"ionRefresh",4,"ngIf"],["animated","","placeholder","Busca medicos...",1,"ion-padding",3,"ionChange"],["color","secondary",2,"font-weight","600","opacity","50%"],["slot","end","color","light"],["class","ion-text-center ion-margin-start ion-margin-end",4,"ngIf"],[4,"ngFor","ngForOf"],["class","ion-padding-top",4,"ngIf"],["position","bottom",1,"ion-margin-top",3,"ionInfinite"],["loadingSpinner","crescent","loadingText","Cargando m\xe1s m\xe9dicos..."],["slot","fixed",3,"ionRefresh"],[1,"ion-text-center","ion-margin-start","ion-margin-end"],[1,"ion-margin"],["color","primary"],[1,"ion-padding-top"],["side","start"],["color","secondary",3,"click"],["name","pencil-outline","slot","icon-only"],[3,"src"],[2,"font-weight","600"],[2,"opacity","0.5","font-weight","500"],[2,"opacity","0.7","color","#00a591 !important"],["side","end"],["color","danger",3,"click"],["name","trash-bin-outline","slot","icon-only"],[1,"ion-text-center",2,"opacity","50%"]],template:function(o,e){1&o&&(l.Lb(0,"ion-header"),l.Lb(1,"ion-toolbar"),l.Lb(2,"ion-buttons",0),l.Jb(3,"ion-back-button",1),l.Kb(),l.Lb(4,"ion-title"),l.fc(5,"M\xe9dicos Registrados"),l.Kb(),l.Lb(6,"ion-buttons",2),l.Lb(7,"ion-button",3),l.Tb("click",(function(){return e.crearMedico()})),l.Jb(8,"ion-icon",4),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(9,"ion-content",5),l.ec(10,g,2,0,"ion-refresher",6),l.Lb(11,"ion-searchbar",7),l.Tb("ionChange",(function(o){return e.busqueda(o)})),l.Kb(),l.Lb(12,"ion-item"),l.Lb(13,"ion-label",8),l.fc(14,"Total registrados:"),l.Kb(),l.Lb(15,"ion-badge",9),l.fc(16),l.Kb(),l.Kb(),l.ec(17,p,6,1,"div",10),l.ec(18,f,19,4,"ion-list",11),l.ec(19,L,3,1,"div",12),l.Lb(20,"ion-infinite-scroll",13),l.Tb("ionInfinite",(function(){return e.reloadDoctors(10)})),l.Jb(21,"ion-infinite-scroll-content",14),l.Kb(),l.Kb()),2&o&&(l.xb(10),l.Yb("ngIf",!0===e.updateList),l.xb(6),l.gc(e.totalRegistrados),l.xb(1),l.Yb("ngIf",!0===e.loading),l.xb(1),l.Yb("ngForOf",e.medicos),l.xb(1),l.Yb("ngIf",!0===e.completeListener))},directives:[s.s,s.Q,s.j,s.f,s.g,s.P,s.i,s.t,s.q,t.i,s.L,s.bb,s.y,s.C,s.h,t.h,s.v,s.w,s.H,s.I,s.k,s.l,s.M,s.D,s.B,s.A,s.z,s.e],styles:[""]}),o})()}];let y=(()=>{class o{}return o.\u0275mod=l.Gb({type:o}),o.\u0275inj=l.Fb({factory:function(e){return new(e||o)},imports:[[r.i.forChild(v)],r.i]}),o})();var K=i("j1ZV");let C=(()=>{class o{}return o.\u0275mod=l.Gb({type:o}),o.\u0275inj=l.Fb({factory:function(e){return new(e||o)},imports:[[t.b,n.d,n.i,s.R,y,K.a]]}),o})()}}]);