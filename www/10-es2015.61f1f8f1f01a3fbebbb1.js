(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{lu3c:function(i,o,n){"use strict";n.r(o),n.d(o,"LoginPageModule",(function(){return L}));var e=n("ofXK"),t=n("3Pt+"),r=n("TEn/"),s=n("tyNb"),a=n("mrSG"),c=n("fXoL"),b=n("on2l"),l=n("kZ8S"),u=n("e8h1"),d=n("2MiI");function m(i,o){if(1&i){const i=c.Mb();c.Lb(0,"div"),c.Lb(1,"form",5),c.Tb("ngSubmit",(function(){return c.bc(i),c.Vb().login()})),c.Lb(2,"ion-list",6),c.Lb(3,"h1"),c.fc(4,"Ingresa tu correo electr\xf3nico"),c.Kb(),c.Lb(5,"ion-item",7),c.Jb(6,"ion-icon",8),c.Jb(7,"ion-input",9),c.Kb(),c.Lb(8,"div",10),c.Lb(9,"h1"),c.fc(10,"Ingresa tu contrase\xf1a"),c.Kb(),c.Lb(11,"ion-item",7),c.Jb(12,"ion-icon",11),c.Jb(13,"ion-input",12),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(14,"div",13),c.Lb(15,"div",14),c.Lb(16,"ion-button",15),c.Tb("click",(function(){return c.bc(i),c.Vb().login()})),c.fc(17," Iniciar sesi\xf3n "),c.Kb(),c.Kb(),c.Kb(),c.Kb()}if(2&i){const i=c.Vb();c.xb(1),c.Yb("formGroup",i.loginForm)}}function g(i,o){if(1&i){const i=c.Mb();c.Lb(0,"div",16),c.Lb(1,"h1",17),c.fc(2,"\xa1Bienvenido de nuevo!"),c.Kb(),c.Jb(3,"img",18),c.Lb(4,"h3",16),c.fc(5),c.Kb(),c.Lb(6,"span",19),c.Tb("click",(function(){return c.bc(i),c.Vb().changeUser()})),c.fc(7,"Cambiar usuario"),c.Kb(),c.Lb(8,"form",5),c.Tb("ngSubmit",(function(){return c.bc(i),c.Vb().login()})),c.Lb(9,"ion-list",6),c.Lb(10,"div",10),c.Lb(11,"ion-item",7),c.Jb(12,"ion-icon",11),c.Jb(13,"ion-input",20),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(14,"div",13),c.Lb(15,"div",14),c.Lb(16,"ion-button",15),c.Tb("click",(function(){return c.bc(i),c.Vb().login()})),c.fc(17," Iniciar sesi\xf3n "),c.Kb(),c.Kb(),c.Kb(),c.Kb()}if(2&i){const i=c.Vb();c.xb(3),c.Yb("src",i.userImg,c.cc),c.xb(2),c.gc(i.dataLocalService.usuario.nombre),c.xb(3),c.Yb("formGroup",i.recentLoginForm)}}function h(i,o){1&i&&(c.Lb(0,"div",21),c.Lb(1,"ion-card"),c.Lb(2,"ion-card-content",22),c.Jb(3,"ion-spinner",23),c.Lb(4,"p",10),c.fc(5,"Iniciando Sesi\xf3n"),c.Kb(),c.Kb(),c.Kb(),c.Kb())}const p=[{path:"",component:(()=>{class i{constructor(i,o,n,e,r,s){this.formBuilder=i,this.router=o,this.alertController=n,this.usuarioService=e,this.dataLocalService=r,this.storage=s,this.userImg="",this.formRecent=!1,this.tryLogin=!1,this.loginForm=this.formBuilder.group({email:["jibv3729@outlook.com",[t.j.required,t.j.email]],password:["JolyPato_3729",[t.j.required,t.j.minLength(8)]]}),this.existeUsuario()}changeUser(){this.formRecent=!1,!1===this.formRecent?(this.formRecent=!1,this.storage.remove("usuario")):this.existeUsuario()}existeUsuario(){this.dataLocalService.cargarUsuario_Promise().then(i=>{console.log("> \xbfExiste un usuario almacenado?:",i),!0===i&&(this.formRecent=!0,this.userImg=this.usuarioService.getUserImage(),this.recentLoginForm=this.formBuilder.group({email:[this.dataLocalService.usuario.email,[t.j.required,t.j.email]],password:["JolyPato_3729",[t.j.required,t.j.minLength(8)]]}))})}login(){return Object(a.a)(this,void 0,void 0,(function*(){console.log("Iniciando sesi\xf3n... \n\n  \xb7 Formlogin a enviar:",this.loginForm.value),this.tryLogin=!0,!1===this.formRecent?yield this.usuarioService.login(this.loginForm.value).then(i=>Object(a.a)(this,void 0,void 0,(function*(){if(console.log(i),!0===i.ok){console.log(`Sesi\xf3n iniciada: \n\n  \xb7 Haz iniciado sesi\xf3n como: "${i.usuario.nombre}".`),this.tryLogin=!1;const o=yield this.alertController.create({backdropDismiss:!1,header:`\xa1Bienvenido ${i.usuario.nombre}!`,message:"Haz iniciado sesi\xf3n con \xe9xito.",buttons:["Adelante"]});yield o.present(),this.router.navigateByUrl("/dashboard")}else{console.warn("No se pudo iniciar sesi\xf3n..."),this.tryLogin=!1;const o=yield this.alertController.create({backdropDismiss:!1,header:"\xa1Hey!",message:i.msg,buttons:["Adelante"]});yield o.present()}}))):yield this.usuarioService.login(this.recentLoginForm.value).then(i=>Object(a.a)(this,void 0,void 0,(function*(){if(console.log(i),!0===i.ok){console.log(`Sesi\xf3n iniciada: \n\n  \xb7 Haz vuelto a iniciar sesi\xf3n como: "${i.usuario.nombre}".`),this.tryLogin=!1;const o=yield this.alertController.create({backdropDismiss:!1,header:`\xa1Bienvenido de nuevo, ${i.usuario.nombre}!`,message:"Haz iniciado sesi\xf3n con \xe9xito.",buttons:["Adelante"]});yield o.present(),this.router.navigateByUrl("/dashboard")}else{console.warn("No se pudo iniciar sesi\xf3n..."),this.tryLogin=!1;const o=yield this.alertController.create({backdropDismiss:!1,header:"\xa1Hey!",message:i.msg,buttons:["Adelante"]});yield o.present()}})))}))}}return i.\u0275fac=function(o){return new(o||i)(c.Ib(t.a),c.Ib(s.g),c.Ib(r.b),c.Ib(b.a),c.Ib(l.a),c.Ib(u.b))},i.\u0275cmp=c.Cb({type:i,selectors:[["app-login"]],decls:5,vars:3,consts:[["titulo","Inicia Sesi\xf3n"],[1,"ion-padding"],[4,"ngIf"],["class","ion-text-center",4,"ngIf"],["class","ion-text-center ion-margin-start ion-margin-end",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"ion-margin-start","ion-margin-end","ion-margin-bottom"],[1,"ion-margin-top"],["slot","start","color","success","name","at-outline"],["type","text","placeholder","nautilusapp@ejemplo.com","autocomplete","off","formControlName","email"],[1,"ion-padding-top"],["slot","start","color","warning","name","key-outline"],["type","password","placeholder","Tu contrase\xf1a","autocomplete","off","min","8","formControlName","password"],[1,"ion-margin","ion-padding"],[1,"ion-margin-start","ion-padding-end"],["color","secondary","expand","block","shape","round","fill","outline",1,"ion-margin-start","ion-margin-end",3,"click"],[1,"ion-text-center"],[1,"ion-padding-bottom"],[1,"avatar",3,"src"],[1,"btnChangeUser",3,"click"],["type","password","placeholder","Contrase\xf1a","autocomplete","off","min","8","formControlName","password"],[1,"ion-text-center","ion-margin-start","ion-margin-end"],[1,"ion-margin"],["color","primary"]],template:function(i,o){1&i&&(c.Jb(0,"app-header",0),c.Lb(1,"ion-content",1),c.ec(2,m,18,1,"div",2),c.ec(3,g,18,3,"div",3),c.ec(4,h,6,0,"div",4),c.Kb()),2&i&&(c.xb(2),c.Yb("ngIf",!1===o.formRecent),c.xb(1),c.Yb("ngIf",!0===o.formRecent),c.xb(1),c.Yb("ngIf",!0===o.tryLogin))},directives:[d.a,r.q,e.i,t.k,t.h,t.c,r.D,r.y,r.t,r.x,r.bb,t.g,t.b,r.i,r.k,r.l,r.M],styles:["ion-list[_ngcontent-%COMP%]{margin-top:0!important;padding-top:0!important}.avatar[_ngcontent-%COMP%]{border-radius:100%;width:25%}.btnChangeUser[_ngcontent-%COMP%]{cursor:pointer;color:var(--ion-color-medium-tint);font-weight:500;transition:.1s ease}.btnChangeUser[_ngcontent-%COMP%]:active, .btnChangeUser[_ngcontent-%COMP%]:hover{color:var(--ion-color-dark-tint)}"]}),i})()}];let f=(()=>{class i{}return i.\u0275mod=c.Gb({type:i}),i.\u0275inj=c.Fb({factory:function(o){return new(o||i)},imports:[[s.i.forChild(p)],s.i]}),i})();var v=n("j1ZV");let L=(()=>{class i{}return i.\u0275mod=c.Gb({type:i}),i.\u0275inj=c.Fb({factory:function(o){return new(o||i)},imports:[[e.b,t.d,r.R,t.i,f,v.a]]}),i})()}}]);